name: Compile Kinetic Views
on:
  push:
    branches: [ main ]
    paths:
      - 'Kinetic-ID-Index.csv'
      - 'S3-Buckets.csv'
      - 'kinetic_compiler.py'

jobs:
  compile:
    runs-on: ubuntu-latest
    steps:
      - uses: actions/checkout@v4
      - uses: actions/setup-python@v5
        with:
          python-version: '3.11'
      - run: pip install pandas
      - run: python kinetic_compiler.py
      - name: Commit compiled views
        run: |
          git config user.name "Kinetic Bot"
          git config user.email "kinetic@users.noreply.github.com"
          git add Views/
          git commit -m "Automated: Compiled Kinetic views [skip ci]" || echo "No changes"
          git push